(this["webpackJsonpreact-view-render-example"]=this["webpackJsonpreact-view-render-example"]||[]).push([[70],{340:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return O}));var c=r(71),n=r(30),a=r(0),s=r.n(a),l=r(394),u=r(681),i=r(646),o=r(7),b=r.n(o),f=(r(3),r(87),r(36),r(88),r(16),r(89),r(86),r(60),r(90),["resource","distance","spin","children","className"]),O=Object(n.d)((function(e){var t=e.resource,r=e.distance,o=e.spin,O=void 0===o?{}:o,j=e.children,h=e.className,p=Object(n.c)(e,f),d=Object(a.useState)(!1),m=Object(c.a)(d,2),v=m[0],w=m[1],g=Object(a.useState)(!1),N=Object(c.a)(g,2),x=N[0],E=N[1],k=Object(a.useState)([]),y=Object(c.a)(k,2),R=y[0],S=y[1],P=Object(a.useRef)(0);P.current=R.length+1;var C=Object(a.useRef)(r||20),H=Object(a.useRef)(v);H.current=v;var J=Object(a.useRef)(!0),T=Object(a.useCallback)((function(){H.current||(w(!0),Promise.resolve("function"===typeof t?t(P.current):null).then((function(e){if(e&&e.hasOwnProperty("list")&&e.hasOwnProperty("hasNext")){var t=e.list,r=e.hasNext;J.current=r,S((function(e){var r=e.slice(0);return r.push(t),r}))}else console.warn("\u8fd4\u56de\u6570\u636e\u5fc5\u987b\u5305\u542blist\u548chasNext\u5c5e\u6027")}),(function(e){console.error(e),E(e.message)})).finally((function(){w(!1)})))}),[t]),$=Object(a.useCallback)((function(e){e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight<C.current&&J.current&&T()}),[T]);return Object(a.useEffect)((function(){T()}),[T]),x?s.a.createElement(u.a,{status:"error",title:"\u52a0\u8f7d\u5f02\u5e38",subTitle:x}):s.a.createElement("div",Object(n.e)({},p,{className:b()(h,"view-render-load-more"),onScroll:$}),s.a.createElement(l.a,{variable:{$item:R}},j),v?s.a.createElement(i.a,O):null)}))}}]);
//# sourceMappingURL=70.bddc4783.chunk.js.map