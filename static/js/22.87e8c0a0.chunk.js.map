{"version":3,"sources":["../../node_modules/echarts/core.js","../../node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/processor/dataFilter.js","../../node_modules/echarts/lib/chart/funnel/FunnelView.js","../../node_modules/echarts/lib/chart/funnel/FunnelSeries.js","../../node_modules/echarts/lib/chart/funnel/funnelLayout.js","../../node_modules/echarts/lib/chart/funnel/install.js"],"names":["createSeriesDataSimply","seriesModel","opt","nameList","isArray","coordDimensions","extend","encodeDefine","getEncode","source","getSource","dimensions","prepareSeriesDataSchema","list","SeriesData","initData","LegendVisualProvider","getDataWithEncodedVisual","getRawData","this","_getDataWithEncodedVisual","_getRawData","prototype","getAllNames","rawData","mapArray","getName","containName","name","indexOfName","getItemVisual","dataIndex","key","dataFilter","seriesType","reset","ecModel","legendModels","findComponents","mainType","length","data","getData","filterSelf","idx","i","isSelected","opacityAccessPath","FunnelPiece","_super","_this","call","polygon","labelLine","graphic","text","setTextContent","setTextGuideLine","updateData","__extends","firstCreate","hostModel","itemModel","getItemModel","layout","getItemLayout","emphasisModel","getModel","opacity","get","saveOldStyle","useStyle","style","lineJoin","setShape","points","shape","setStatesStylesFromModel","_updateLabel","enableHoverEmphasis","getTextGuideLine","labelText","getTextContent","labelLayout","label","visualColor","fill","setLabelStyle","getLabelStatesModels","labelFetcher","labelDataIndex","defaultOpacity","defaultText","normal","align","textAlign","verticalAlign","setTextConfig","local","inside","insideStroke","outsideFill","linePoints","textGuideLineConfig","anchor","x","y","attr","rotation","originX","originY","z2","setLabelLineStyle","getLabelLineStatesModels","stroke","FunnelView","apply","arguments","type","ignoreLabelLineUpdate","render","api","oldData","_data","group","diff","add","funnelPiece","setItemGraphicEl","update","newIdx","oldIdx","piece","getItemGraphicEl","remove","execute","removeAll","dispose","ChartView","FunnelSeriesModel","init","option","legendVisualProvider","zrUtil","_defaultLabelLine","getInitialData","encodeDefaulter","makeSeriesEncodeForNameBased","defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","emphasis","show","getDataParams","params","valueDim","mapDimension","sum","getSum","percent","toFixed","$vars","push","defaultOption","zlevel","z","legendHoverLink","colorBy","left","top","right","bottom","minSize","maxSize","sort","orient","gap","funnelAlign","position","lineStyle","width","itemStyle","borderColor","borderWidth","select","SeriesModel","funnelLayout","eachSeriesByType","viewRect","getBoxLayoutParams","getWidth","height","getHeight","getViewRect","viewWidth","viewHeight","indices","valueArr","val","isAscending","len","count","a","b","getSortedIndices","sizeExtent","parsePercent","dataExtent","getDataExtent","min","max","Math","itemSize","getLinePoints","offset","val_1","itemHeight","linearMap","y0","x0","itemWidth","reverse","nextIdx","start","end","setItemLayout","concat","slice","each","textX","textY","labelPosition","labelLineModel","isLabelInside","x1","y1","x2","y2","labelLineLen","install","registers","registerChartView","registerSeriesModel","registerLayout","registerProcessor"],"mappings":"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","file":"static/js/22.87e8c0a0.chunk.js","sourcesContent":["/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nexport * from './lib/export/core';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport SeriesData from '../../data/SeriesData';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar FunnelPiece =\n/** @class */\nfunction (_super) {\n  __extends(FunnelPiece, _super);\n\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n\n    _this.setTextGuideLine(labelLine);\n\n    _this.updateData(data, idx, true);\n\n    return _this;\n  }\n\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    } // Update common style\n\n\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n\n    setStatesStylesFromModel(polygon, itemModel);\n\n    this._updateLabel(data, idx);\n\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle( // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    }; // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n\n  return FunnelPiece;\n}(graphic.Polygon);\n\nvar FunnelView =\n/** @class */\nfunction (_super) {\n  __extends(FunnelView, _super);\n\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  FunnelView.prototype.dispose = function () {};\n\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\n\nexport default FunnelView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport { defaultEmphasis } from '../../util/model';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar FunnelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSeriesModel, _super);\n\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\n\n    this._defaultLabelLine(option);\n  };\n\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  }; // Overwrite\n\n\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // 默认取数据最小最大值\n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer' // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: 各异,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: 各异,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\n\nexport default FunnelSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout';\nimport { parsePercent, linearMap } from '../../util/number';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (typeof sort === 'function') {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function (idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView';\nimport FunnelSeriesModel from './FunnelSeries';\nimport funnelLayout from './funnelLayout';\nimport dataFilter from '../../processor/dataFilter';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}"],"sourceRoot":""}