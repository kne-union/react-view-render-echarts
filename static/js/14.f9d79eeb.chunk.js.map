{"version":3,"sources":["../../src/createEChart.js","../../node_modules/echarts/core.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../node_modules/echarts/lib/chart/helper/LineDraw.js","../../node_modules/echarts/lib/chart/helper/LinePath.js","../../node_modules/echarts/lib/chart/helper/Line.js","../../node_modules/echarts/lib/data/Graph.js","../../node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../node_modules/echarts/lib/chart/graph/categoryFilter.js","../../node_modules/echarts/lib/chart/graph/categoryVisual.js","../../node_modules/echarts/lib/chart/graph/edgeVisual.js","../../node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayout.js","../../node_modules/echarts/lib/chart/graph/graphHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayout.js","../../node_modules/echarts/lib/chart/graph/forceHelper.js","../../node_modules/echarts/lib/chart/graph/forceLayout.js","../../node_modules/echarts/lib/chart/graph/createView.js","../../node_modules/echarts/lib/chart/graph/adjustEdge.js","../../node_modules/echarts/lib/chart/graph/GraphView.js","../../node_modules/echarts/lib/chart/graph/GraphSeries.js","../../node_modules/echarts/lib/chart/graph/install.js","../../src/EChartGraph.js"],"names":["echarts","applyVariable","options","props","ref","useRef","echartRef","useEffect","chart","onReady","onResize","LegendVisualProvider","getDataWithEncodedVisual","getRawData","this","_getDataWithEncodedVisual","_getRawData","prototype","getAllNames","rawData","mapArray","getName","containName","name","indexOfName","getItemVisual","dataIndex","key","symbolNeedsDraw","data","point","idx","opt","isNaN","isIgnore","clipShape","contain","normalizeUpdateOpt","isObject","makeSeriesScope","seriesModel","hostModel","emphasisModel","getModel","emphasisItemStyle","getItemStyle","blurItemStyle","selectItemStyle","focus","get","blurScope","hoverScale","labelStatesModels","getLabelStatesModels","cursorStyle","SymbolDraw","SymbolCtor","group","graphic","_SymbolCtor","SymbolClz","updateData","oldData","_data","disableAnimation","seriesScope","symbolUpdateOpt","getSymbolPoint","getItemLayout","removeAll","diff","add","newIdx","symbolEl","setPosition","setItemGraphicEl","update","oldIdx","getItemGraphicEl","newSymbolType","oldSymbolType","getSymbolType","remove","target","x","y","attr","el","fadeOut","execute","_getSymbolPoint","isPersistent","updateLayout","_this","eachItemGraphicEl","markRedraw","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","ensureState","hoverLayer","start","end","traverse","enableAnimation","LineDraw","LineCtor","_LineCtor","LineGroup","lineData","lineDraw","oldLineData","_lineData","_doAdd","_doUpdate","animators","length","isEffectObject","lineNeedsDraw","newLineData","itemEl","lineStyle","getLineStyle","emphasisLineStyle","blurLineStyle","selectLineStyle","isPointNaN","pt","pts","straightLineProto","bezierCurveProto","StraightLineShape","x1","y1","x2","y2","percent","_super","CurveShape","apply","arguments","__extends","isStraightLine","shape","cpx1","cpy1","ECLinePath","opts","call","type","getDefaultStyle","stroke","fill","getDefaultShape","buildPath","ctx","pointAt","t","tangentAt","p","vec2","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","createSymbol","symbolType","symbolSize","symbolRotate","symbolOffset","symbolKeepAspect","symbolSizeArr","symbolUtil","symbolOffsetArr","symbolPath","__specifiedRotation","Math","PI","setLinePoints","targetShape","points","cp1","NaN","Line","_createLine","line","subPixelOptimize","createLine","each","symbol","_updateCommonStl","childOfName","linePoints","getLinePath","childAt","hasItemOption","itemModel","getItemModel","visualColor","useStyle","style","strokeNoScale","setColor","opacity","i","SPECIAL_STATES","stateName","lineState","getState","lineStateStyle","state","stateStyle","__isEmptyBrush","rawVal","getRawValue","setLabelStyle","labelDataIndex","labelFetcher","getFormattedLabel","dataType","inheritColor","defaultOpacity","defaultText","isFinite","round","label","getTextContent","labelNormalModel","normal","__align","align","__verticalAlign","verticalAlign","__position","distance","isArray","__labelDistance","setTextConfig","position","local","inside","enableHoverEmphasis","highlight","enterEmphasis","downplay","leaveEmphasis","linePath","dirty","beforeUpdate","lineGroup","symbolFrom","symbolTo","ignore","invScale","parentNode","parent","scaleX","__dirty","fromPos","toPos","d","vector","setSymbolRotation","scaleY","originX","originY","textAlign","textVerticalAlign","distanceX","distanceY","halfPercent","tangent","n","cp","dir","rotation","atan2","dy","setStyle","specifiedRotation","generateNodeKey","id","Graph","directed","nodes","edges","_nodesMap","_edgesMap","_directed","isDirected","addNode","nodesMap","node","GraphNode","hostGraph","push","getNodeByIndex","rawIdx","getRawIndex","getNodeById","addEdge","n1","n2","edgesMap","edge","GraphEdge","outEdges","inEdges","getEdgeByIndex","edgeData","getEdge","eachNode","cb","context","len","eachEdge","node1","node2","breadthFirstTraverse","startNode","direction","edgeType","__visited","queue","currentNode","shift","e","otherNode","count","filterSelf","clone","graph","degree","inDegree","outDegree","path","getAdjacentDataIndices","dataIndices","adjacentEdge","createGraphDataProxyMixin","hostName","dataName","getValue","dimension","getStore","getDimensionIndex","setVisual","value","setItemVisual","getVisual","setLayout","layout","merge","setItemLayout","getLayout","getGraphicEl","zrUtil","createGraphFromNodeEdge","beforeLink","linkNameList","validEdges","linkCount","link","source","convertOptionIdName","nodeData","coordSys","createSeriesData","coordSysCtor","CoordinateSystem","coordDimensions","dimensions","concat","prepareSeriesDataSchema","encodeDefine","getEncode","SeriesData","initData","linkSeriesData","mainData","struct","structAttr","datas","datasAttr","categoryFilter","ecModel","legendModels","findComponents","mainType","eachSeriesByType","graphSeries","categoriesData","getCategoriesData","getGraph","categoryNames","category","getShallow","isSelected","categoryVisual","paletteScope","getData","categoryNameIdxMap","getColorFromPalette","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","ensureUniqueItemVisual","extend","visualList","normalize","a","Array","graphEdgeVisual","getEdgeData","existsStyle","nodeStyle","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","join","uid","getOppositeKey","keys","split","getEdgeMapLengthWithKey","edgeMap","__edgeMap","getCurvenessForEdge","index","needReverse","autoCurvenessParams","isArrayParam","edgeArray","getEdgeFromMap","edgeIndex","totalLen","getTotalLengthBetweenNodes","curKey","parityCorrection","isForward","oppositeKey","resValue","simpleLayout","coordinateSystem","model","simpleLayoutEdge","curveness","p1","p2","graphSimpleLayout","api","data_1","dimensions_1","coordDim","mapDimensionsAll","hasValue","val","dataToPoint","getNodeGlobalScale","nodeScaleRatio","option","groupZoom","getZoom","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","rect","getBoundingRect","cx","width","cy","height","r","min","_layoutNodesBasedOn","x12","y12","angle","sum","getSum","unitAngle","radianHalf","cos","sin","sumRadian","nodeScale","symbolRadianHalf","asin","halfRemainRadian","graphCircularLayout","scaleAndAdd","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","getId","nodeDataExtent_1","getDataExtent","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","linearMap","w","fixed","edgeModel","ignoreForceLayout","forceInstance","inNodes","center","gravity","random","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","setUnfixed","beforeStep","afterStep","step","v12","nLen","j","repFact","v","finished","forceLayout","l","stopped","slice","createViewCoordSys","viewList","coordSysType","positions","max","bbox","aspect","viewRect","getBoxLayoutParams","getLayoutRect","getWidth","getHeight","getViewRect","bbWidth","bbHeight","viewWidth","viewHeight","viewCoordSys","View","zoomLimit","setBoundingRect","setViewRect","setCenter","setZoom","v1","v2","v3","quadraticAt","curveTool","v2DistSquare","mathAbs","abs","intersectCurveCircle","curvePoints","radius","p0","Infinity","radiusSquare","interval","_t","next","nextDiff","adjustEdge","scale","tmp0","quadraticSubdivide","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","init","symbolDraw","_controller","RoamController","getZr","_controllerHost","_symbolDraw","_lineDraw","_firstRender","render","_model","groupNewProp","_updateNodeAndLinkScale","_updateController","clearTimeout","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","off","draggable","on","_layouting","setDraggable","getECData","circularRotateLabel","labelRotate","getSymbolPath","pos","rad","isLeft","textPosition","origin","emphasisState","textConfig","dispose","self","setTimeout","controller","controllerHost","setPointerChecker","applyTransform","transform","onIrrelevantElement","enable","zoom","roamHelper","dx","dispatchAction","seriesId","updateLabelLayout","disable","setSymbolScale","ChartView","GraphSeriesModel","hasSymbolVisual","_categoriesData","legendVisualProvider","fillDataTextStyle","links","_updateCategoriesData","mergeOption","mergeDefaultAndTheme","defaultEmphasis","getInitialData","wrapMethod","categoryModel","_categoriesModels","parentModel","oldGetModel","Model","newGetModel","resolveParentPath","pathArr","newPathArr","oppositeEdges","createEdgeMapForCurveness","formatTooltip","multipleSeries","params","getDataParams","sourceName","targetName","nameArr","createTooltipMarkup","noValue","defaultSeriesFormatTooltip","series","categories","isAnimationEnabled","dependencies","defaultOption","zlevel","z","legendHoverLink","circular","rotateLabel","force","left","top","edgeSymbol","edgeSymbolSize","edgeLabel","roam","show","formatter","itemStyle","color","emphasis","select","borderColor","SeriesModel","actionInfo","event","install","registers","registerChartView","registerSeriesModel","registerProcessor","registerVisual","edgeVisual","registerLayout","PRIORITY","VISUAL","POST_CHART_LAYOUT","registerCoordinateSystem","create","createView","registerAction","payload","eachComponent","query","res","updateCenterAndZoom","createEChart"],"mappings":"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","file":"static/js/14.f9d79eeb.chunk.js","sourcesContent":["import React, {useEffect, useRef} from \"react\";\nimport ResizeObserver from \"rc-resize-observer\";\nimport {applyVariable} from '@kne/react-view-render';\n\nconst createEChart = (echarts) => applyVariable(({onReady, options, ...props}) => {\n    const ref = useRef(null);\n    const echartRef = useRef(null);\n    useEffect(() => {\n        const chart = echarts.init(ref.current);\n        echartRef.current = chart;\n        chart.setOption(options);\n        onReady && onReady(chart);\n        return () => {\n            chart.dispose();\n        };\n    }, [options]);\n    return <ResizeObserver onResize={() => {\n        echartRef.current && echartRef.current.resize();\n    }}>\n        <div ref={ref} {...props} />\n    </ResizeObserver>\n});\n\nexport default createEChart;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nexport * from './lib/export/core';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport SymbolClz from './Symbol';\nimport { isObject } from 'zrender/lib/core/util';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n      if (!symbolEl // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport LineGroup from './Line';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: hostModel.getModel(['emphasis', 'lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\n\nimport * as graphic from '../../util/graphic';\nimport * as vec2 from 'zrender/lib/core/vector';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as symbolUtil from '../../util/symbol';\nimport ECLinePath from './LinePath';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle';\nimport { round } from '../../util/number';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = lineData.getItemVisual(idx, symbolCategory);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      emphasisLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    enableHoverEmphasis(this);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\n   * Add a new node\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\n   * Get node by data index\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\n   * Get node by id\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\n   * Add a new edge\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PNEDING\n\n    if (typeof n1 === 'number') {\n      n1 = this.nodes[n1];\n    }\n\n    if (typeof n2 === 'number') {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\n   * Get edge by data index\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\n   * Iterate all nodes\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Iterate all edges\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesData from '../../data/SeriesData';\nimport Graph from '../../data/Graph';\nimport linkSeriesData from '../../data/helper/linkSeriesData';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport createSeriesData from './createSeriesData';\nimport { convertOptionIdName } from '../../util/model';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (typeof category === 'number') {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (typeof categoryIdx === 'string') {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\n\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\n\n\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (typeof autoCurvenessParmas === 'number') {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\n\n\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\n\n\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\n\n\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\n\n\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\n\nexport function circularLayout(seriesModel, basedOn) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper';\nimport { simpleLayout } from './simpleLayoutHelper';\nimport { circularLayout } from './circularLayoutHelper';\nimport { linearMap } from '../../util/number';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View';\nimport { getLayoutRect } from '../../util/layout';\nimport * as bbox from 'zrender/lib/core/bbox';\nimport { extend } from 'zrender/lib/core/util';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize } from './graphHelper';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n        vec2.copy(pts2[0], originalPoints[0]);\n        vec2.copy(pts2[1], originalPoints[1]);\n        vec2.sub(v, pts2[1], pts2[0]);\n        vec2.normalize(v, v);\n\n        if (fromSymbol && fromSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node1);\n          vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n        }\n\n        if (toSymbol && toSymbol !== 'none') {\n          var symbolSize = getSymbolSize(edge.node2);\n          vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n        }\n\n        vec2.copy(linePoints[0], pts2[0]);\n        vec2.copy(linePoints[1], pts2[1]);\n      }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LineDraw from '../helper/LineDraw';\nimport RoamController from '../../component/helper/RoamController';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport * as graphic from '../../util/graphic';\nimport adjustEdge from './adjustEdge';\nimport { getNodeGlobalScale } from './graphHelper';\nimport ChartView from '../../view/Chart';\nimport { getECData } from '../../util/innerStore';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel(); // Update draggable\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function () {\n          if (forceLayout) {\n            forceLayout.warmUp();\n            !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n            forceLayout.setFixed(idx); // Write position back to layout\n\n            data.setItemLayout(idx, [el.x, el.y]);\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable && !!forceLayout);\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.eachItemGraphicEl(function (el, idx) {\n      var itemModel = data.getItemModel(idx);\n      var labelRotate = itemModel.get(['label', 'rotate']) || 0;\n      var symbolPath = el.getSymbolPath();\n\n      if (circularRotateLabel) {\n        var pos = data.getItemLayout(idx);\n        var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n        if (rad < 0) {\n          rad = Math.PI * 2 + rad;\n        }\n\n        var isLeft = pos[0] < cx;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n\n        var textPosition = isLeft ? 'left' : 'right';\n        symbolPath.setTextConfig({\n          rotation: -rad,\n          position: textPosition,\n          origin: 'center'\n        });\n        var emphasisState = symbolPath.ensureState('emphasis');\n        zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n          position: textPosition\n        });\n      } else {\n        symbolPath.setTextConfig({\n          rotation: labelRotate *= Math.PI / 180\n        });\n      }\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { defaultEmphasis } from '../../util/model';\nimport Model from '../../model/Model';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter';\nimport categoryVisual from './categoryVisual';\nimport edgeVisual from './edgeVisual';\nimport simpleLayout from './simpleLayout';\nimport circularLayout from './circularLayout';\nimport forceLayout from './forceLayout';\nimport createView from './createView';\nimport View from '../../coord/View';\nimport GraphView from './GraphView';\nimport GraphSeriesModel from './GraphSeries';\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, function () {});\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, function () {}); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","import * as echarts from 'echarts/core';\nimport {GraphChart} from 'echarts/charts';\nimport {\n    TitleComponent,\n    TooltipComponent,\n    GridComponent,\n    LegendComponent\n} from 'echarts/components';\nimport {CanvasRenderer} from 'echarts/renderers';\nimport createEChart from \"./createEChart\";\n\necharts.use([\n    LegendComponent,\n    TitleComponent,\n    TooltipComponent,\n    GridComponent,\n    GraphChart,\n    CanvasRenderer\n]);\n\nexport default createEChart(echarts);"],"sourceRoot":""}